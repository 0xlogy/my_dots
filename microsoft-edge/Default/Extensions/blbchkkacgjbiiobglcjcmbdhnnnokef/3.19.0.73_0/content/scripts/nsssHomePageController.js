!function(t){"use strict";const{SEARCH_SUGGESTION_METADATA:r}=NSSS["constants"],{extensionAdapter:s,utils:{isNil:o}}=SymBfw,e=NSSS.uiConstants.MESSAGES;(t.NSSS=t.NSSS||{}).homePageController=new class{constructor(){this._preCachedSuggestion={},this._homePageMetadata=null}_constructHomePageMetaData(){return new Promise(function(e,a){SymBfw.extensionAdapter.sendMessage({name:NSSS.uiConstants.MESSAGES.GET_HOME_PAGE_METADATA},t=>{(s.getLastError()||o(t))&&a(null),e(t)})})}async init(){try{await NSSS.vendorSetup.getVendor(),this._homePageMetadata=await this._constructHomePageMetaData()}catch(t){return void SymBfw.logger.debug("Error in getting homepage metadata  - "+t)}o(this._homePageMetadata.navigatorLanguage)&&(SymBfw.logger.debug("navigator Language from BG is null"),this._homePageMetadata.navigatorLanguage=r.defaultLangCode),this._populateSuggestionParams()}getHomePageMetadata(){return this._homePageMetadata}_populateSuggestionParams(){var t=r[NSSS.constants.VENDOR];if(SymBfw.utils.isNil(t))throw new Error("Unsupported vendor name");var e=t.suggestionUrl;const a=new URLSearchParams(t.queryParams);let[s,n]=this._homePageMetadata.navigatorLanguage.split("-");NSSS.constants.VENDOR===NSSS.constants.IAC&&(t=o(n)?s:s+"_"+n.toLocaleUpperCase(),a.set(NSSS.constants.URL_PARAMS_KEY.HL,t)),this._searchAPIUrl=e,this._queryParams=a}_getSuggestionUrlByVendor(t){return NSSS.constants.VENDOR===NSSS.constants.IAC&&this._queryParams.set(NSSS.constants.URL_PARAMS_KEY.IAC_QUERY,t),""+this._searchAPIUrl+this._queryParams.toString()}async fetchSuggestions(t){if(SymBfw.utils.isNil(this._homePageMetadata))return SymBfw.logger.debug("HomePageController is not initialized. Please call init before calling fetchSuggestions"),[];if(this._preCachedSuggestion[t])return this._preCachedSuggestion[t];try{var e=this._getSuggestionUrlByVendor(t);const s=await SymBfw.utils.safeFetch(e);var[,a]=await s.json();return this._preCachedSuggestion[t]=a}catch(t){return SymBfw.logger.error("Unable to fetch the suggestion result due to "+t),[]}}launchSearchTab(t){SymBfw.utils.isNil(t)||SymBfw.extensionAdapter.sendMessage({name:e.LAUNCH_SEARCH_TAB_WITH_URL,query:t})}}}(executionContext);