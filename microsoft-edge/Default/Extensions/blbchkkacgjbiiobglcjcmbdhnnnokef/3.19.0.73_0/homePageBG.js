(()=>{var e=new class{get quickLinksData(){return{amazon:{name:"amazon",toolTipName:"Amazon",associateUrl:"https://www.amazon.com",domain:"amazon"},walmart:{name:"walmart",toolTipName:"Walmart",associateUrl:"https://redirect.viglink.com?key=e39418fea5d725c6aa9070835ec4997b&u=https%3A%2F%2Fwalmart.com",domain:"walmart"},tripadvisor:{name:"tripadvisor",toolTipName:"Tripadvisor",associateUrl:"https://redirect.viglink.com?key=e39418fea5d725c6aa9070835ec4997b&u=https%3A%2F%2Ftripadvisor.com",domain:"tripadvisor"},nordstrom:{name:"nordstrom",toolTipName:"Nordstrom",associateUrl:"https://redirect.viglink.com/?key=e39418fea5d725c6aa9070835ec4997b&u=https%3A%2F%2Fshop.nordstrom.com%2F%0D%0A",domain:"nordstrom"},booking:{name:"booking",toolTipName:"Booking.com",associateUrl:"https://www.awin1.com/awclick.php?mid=6776&id=1146969",domain:"booking"}}}get quickLinksReq(){return[{name:"amazon",dynamic:!0},{name:"walmart"},{name:"tripadvisor"},{name:"nordstrom"},{name:"booking"}]}};NSSS.quickLinksConfig=e})(),(()=>{var{}=NSSS;var e=new class{constructor(){this.abTestImpls={}}registerABTestImpl(e,t){this.abTestImpls[e]=t}};NSSS.abTestingAppsRepo=e})(),NSSS.GoogleAppsConfig=class{static get config(){return[{name:"Account",spriteImagePosition:"0 -1585px",url:"https://myaccount.google.com/"},{name:"Maps",spriteImagePosition:"0 -483px",url:"https://maps.google.com"},{name:"Play",spriteImagePosition:"0 -207px",url:"https://play.google.com/"},{name:"Drive",spriteImagePosition:"0 -2967px",url:"https://drive.google.com/"},{name:"Calendar",spriteImagePosition:"0 -2553px",url:"https://calendar.google.com/"},{name:"News",spriteImagePosition:"0 -1311px",url:"https://news.google.com/"},{name:"Translate",spriteImagePosition:"0 -1932px",url:"https://translate.google.com/"},{name:"Photos",spriteImagePosition:"0 -2829px",url:"https://photos.google.com/"},{name:"Chat",spriteImagePosition:"0 -1656px",url:"https://chat.google.com/"},{name:"Duo",spriteImagePosition:"0 -2484px",url:"https://duo.google.com/"},{name:"Meet",spriteImagePosition:"0 -690px",url:"https://meet.google.com"},{name:"Docs",spriteImagePosition:"0 -1242px",url:"https://docs.google.com/document/"},{name:"Contacts",spriteImagePosition:"0 -2898px",url:"https://contacts.google.com/"},{name:"Classroom",spriteImagePosition:"0 -966px",url:"https://classroom.google.com/"}]}static get GOOGLE_APPS_TOUR_DATA(){return{APPS_TEST_2022_1_TEST_TRACK:{key:"google_apps",positionCSS:" tooltip-position-google-apps ",titleText:"Link to your apps",descriptionText:"Access your apps quickly and easily from your Norton Home Page.",toolTipCss:"tour-tooltip-container-google-apps",tourOrderIndex:5},APPS_TEST_2022_1_CONTROL_TRACK:{}}}static get TEST_ID(){return"APPS_TEST_2022_1"}},(()=>{const{uiConstants:{MESSAGES:o},globalSettings:s,GoogleAppsConfig:a,telemetryWrapper:i,uiConstants:n}=NSSS,{utils:{isNil:r,isntNil:c},logger:l,telemetryConstants:t}=SymBfw,m=SymBfw["extensionAdapter"];NSSS.googleAppsManager=new class{constructor(){this.messageListener=this.messageListener.bind(this)}_getAppsDataBasedOnVariant(e){return{APPS_TEST_2022_1_TEST_TRACK:{data:{configs:a.config,strings:NSSS.uiConstants.HOMEPAGE.googleApps.strings}},APPS_TEST_2022_1_CONTROL_TRACK:{data:{}}}[e]}getAppsData(e){const t=this._getAppsDataBasedOnVariant(e);return c(t)&&0!==Object.keys(t.data).length&&(t.key=n.HomepageTourSteps.GOOGLE_APPS,t.variantId=e,t.testId=a.TEST_ID),t}getTourData(e){return a.GOOGLE_APPS_TOUR_DATA[e]}_handleGoogleAppClicked(e,t){m.createTab(t),i.sendGoogleAppsClickEvent(e),s.setGoogleAppsClickedValue(!0)}_handleGoogleAppsPopupShown(){i.sendGoogleAppsPopupShownEvent()}_handleMoreGoogleAppsIconClicked(){m.createTab("https://about.google/intl/en-US/products/?tab=rh"),i.sendMoreGoogleAppsClickEvent()}messageListener(e){if(r(e))l.error("Request cannot be null");else{var t=e.name,s=e.message;switch(t){case o.GOOGLE_APP_CLICKED:if(r(s)||r(s.appName)||r(s.url))break;this._handleGoogleAppClicked(s.appName,s.url);break;case o.MORE_GOOGLE_APPS_CLICKED:this._handleMoreGoogleAppsIconClicked();break;case o.GOOGLE_APPS_POPUP_SHOWN:this._handleGoogleAppsPopupShown()}}}getAppliedVariant(){var e=a.TEST_ID;return NSSS.abTestingDataProvider.getApplicableVariantForTestId(e)}_getGoogleAppVariantCustomDimesion(){if(!r(this.getAppliedVariant()))return{[t.parameters.CUSTOM_DIMENSION21]:()=>this.getAppliedVariant()}}_getGoogleAppsUsageCustomDimesion(){if(!r(this.getAppliedVariant())){var e=this._getAppsDataBasedOnVariant(this.getAppliedVariant());if(!r(e)&&0!==Object.keys(e.data).length)return{[t.parameters.CUSTOM_DIMENSION20]:()=>this.getAndResetGoogleAppsClickedValue()}}}getHeartBeatPingCustomDimesions(){return{...this._getGoogleAppVariantCustomDimesion(),...this._getGoogleAppsUsageCustomDimesion()}}getInstallPingCustomDimensions(){return this._getGoogleAppVariantCustomDimesion()}getAndResetGoogleAppsClickedValue(){let e=s.getGoogleAppsClickedValue();return r(e)&&(e=!1),s.setGoogleAppsClickedValue(!1),e}},NSSS.abTestingAppsRepo.registerABTestImpl(a.TEST_ID,NSSS.googleAppsManager),m.addMessageListener(NSSS.googleAppsManager.messageListener)})(),(()=>{const i=NSSS["abTestingAppsRepo"],{isNil:n,isntNil:r}=SymBfw["utils"];var e=new class{_getApplicableAppsAndTourData(){const a={appsData:{},tourData:[]};let e=Object.keys(i.abTestImpls);return n(e)||0===Object.keys(e).length||e.forEach(e=>{var t=this.getApplicableVariantForTestId(e);if(!n(t)){const o=i.abTestImpls[e];var e=o.getAppsData(t),s=(r(e)&&0!==Object.keys(e.data).length&&(s=e.key,a.appsData={...a.appsData,[s]:e}),o.getTourData(t));r(s)&&0!==Object.keys(s).length&&a.tourData.push(s)}}),a}getApplicableVariantForTestId(e){e=multiVariateTestingSDK.multiVariateTestManager.getVariantForTestIds([e]).tests;if(0===e.length)return null;e=e[0].variant;return r(e)?e.variantId:null}getApplicableAppsData(){var e=this._getApplicableAppsAndTourData()["appsData"];return e}getApplicableTourData(){var e=this._getApplicableAppsAndTourData()["tourData"];return e}getCustomDimensionsData(){let e=Object.keys(i.abTestImpls);if(!n(e)&&0!==Object.keys(e).length){let s={},o={};return e.forEach(e=>{const t=i.abTestImpls[e];s=t.getHeartBeatPingCustomDimesions(),o=t.getInstallPingCustomDimensions()}),{hbPingCustomDimesions:s,installPingCustomDimesions:o}}}getHeartBeatPingCustomDimesions(){var e=this.getCustomDimensionsData()["hbPingCustomDimesions"];return e}getInstallPingCustomDimesions(){var e=this.getCustomDimensionsData()["installPingCustomDimesions"];return e}};NSSS.abTestingDataProvider=e})(),(()=>{const e=NSSS["uiConstants"];NSSS.HomePageTourConfig=class{static get TOUR_COMPONENTS_EN_US(){return[e.HomepageTourSteps.SEARCH_BOX,e.HomepageTourSteps.STATIC_CHICKLETS,e.HomepageTourSteps.CUSTOM_CHICKLETS,e.HomepageTourSteps.TWITTER_FEEDS,e.HomepageTourSteps.SECURITY_CENTER_FEEDS]}static get TOUR_COMPONENTS_ROW(){return[e.HomepageTourSteps.SEARCH_BOX,e.HomepageTourSteps.STATIC_CHICKLETS,e.HomepageTourSteps.CUSTOM_CHICKLETS]}static get INITIAL_TOUR_DATA(){return{start:NSSS.uiConstants.HomepageTourSteps.WELCOME_DIALOG,[NSSS.uiConstants.HomepageTourSteps.WELCOME_DIALOG]:{nextStep:NSSS.uiConstants.HomepageTourSteps.SEARCH_BOX},[NSSS.uiConstants.HomepageTourSteps.SETTINGS_ICON]:{descriptionText:"A tour of Norton Safe Search is available in Settings.",autoHideTooltip:!0,positionCSS:" tooltip-position-settings-icon ",cssClassName:" tour-tooltip-for-settings-icon ",iconPath:"content/images/settings-icon-for-tour-tooltip.svg",nextStep:null}}}static get COMPONENTS_TOUR_DATA(){return{[e.HomepageTourSteps.SEARCH_BOX]:{key:"search_box",positionCSS:" tooltip-position-searchbox ",titleText:"Peace of mind with every search",descriptionText:"Norton Safe Search shows site safety ratings in your search results."},[e.HomepageTourSteps.STATIC_CHICKLETS]:{key:"static_chicklets",positionCSS:" tooltip-position-static-chicklets ",descriptionText:"Quick links to access popular sites with ease"},[e.HomepageTourSteps.CUSTOM_CHICKLETS]:{key:"custom_chicklets",positionCSS:" tooltip-position-custom-chicklets ",titleText:"Editable quick links",descriptionText:"Add your favorite sites to the new Quick Links bar."},[e.HomepageTourSteps.TWITTER_FEEDS]:{key:"twitter_feeds",positionCSS:" tooltip-position-tweets-list ",descriptionText:"Get security updates and tips from Norton"},[e.HomepageTourSteps.SECURITY_CENTER_FEEDS]:{key:"security_center_feeds",positionCSS:" tooltip-position-security-center ",descriptionText:"Explore the latest security and privacy blogs from NortonLifeLock and learn more about digital safety."}}}}})(),(()=>{const{abTestingDataProvider:o,HomePageTourConfig:c,uiConstants:l}=NSSS,{localizer:a,utils:{isntNil:i}}=SymBfw;var e=new class{_positionABTestComponent(t,e){return e.forEach(e=>{t.splice(e.tourOrderIndex,0,e.key)}),t}_processTourData(o,a,i){let n=o.length;const r=c.INITIAL_TOUR_DATA;return r.id=a,o.forEach((t,e)=>{const s=c.COMPONENTS_TOUR_DATA[t]||i.find(e=>e.key===t);s.pageNumberText=e+1+"/"+n,s.nextStep=e===n-1?l.HomepageTourSteps.SETTINGS_ICON:o[e+1],s.buttonText=e===n-1&&"tourForUS"===a?"Done":"Next",r[t]=s}),r}_prepareTourData(){let e=null,t=null;t="en-US"===a.getNavigatorLanguage()?(e=c.TOUR_COMPONENTS_EN_US,"tourForUS"):(e=c.TOUR_COMPONENTS_ROW,"tourForRestOfTheWorld");var s=o.getApplicableTourData();return i(s)&&0!==s.length&&(e=this._positionABTestComponent(e,s)),this._processTourData(e,t,s)}getTourData(){return this._prepareTourData()}};NSSS.homePageTourManager=e})();class HomePageConstants{get QUICK_LINKS(){return{[NSSS.constants.IAC]:{version:0,quicklinksData:NSSS.quickLinksConfig.quickLinksData},[NSSS.constants.YAHOO]:{version:0,quicklinksData:NSSS.quickLinksConfig.quickLinksData}}}get DEFAULT_CUSTOM_CHICKLETS(){return{customQuicklinksData:[{name:"Gmail",associateUrl:"https://www.gmail.com"},{name:"Facebook",associateUrl:"https://www.facebook.com"},{name:"Youtube",associateUrl:"https://www.youtube.com"}]}}get TWEETS(){return{data:[{time:"Oct 29, 2020",text:"76% of Americans believe they’ve encountered disinformation firsthand. Read more: https://t.co/5yth1vtHqi #disinformation #fakenews #elections https://t.co/oBgFkDdJhe",username:"NortonLifeLock",id_str:"1321530740736167939",userIconUrl:"https://pbs.twimg.com/profile_images/1191468124387676160/qqryvupD_normal.png",handle:"NortonLifelock"},{time:"Oct 28, 2020",text:"Don’t miss our #NCSAM webinar today where NortonLifeLock experts will share #CyberSafety tips to help protect you from online threats and identity theft. https://t.co/AFquzrBGVR #BeCyberSmart #IdentityTheft https://t.co/Flp3v3diBW",username:"NortonLifeLock",id_str:"1321459203664470018",userIconUrl:"https://pbs.twimg.com/profile_images/1191468124387676160/qqryvupD_normal.png",handle:"NortonLifelock"},{time:"Oct 27, 2020",text:"As part of National Cybersecurity Awareness Month, experts from NortonLifeLock will share Cyber Safety tips to help secure your connected life. Don’t miss our webinar tomorrow, Oct 28. https://t.co/8wWhMl47V4 #BeCyberSmart #NCSAM #IdentityTheft https://t.co/3TEu9Jpx6c",username:"NortonLifeLock",id_str:"1321126933950795780",userIconUrl:"https://pbs.twimg.com/profile_images/1191468124387676160/qqryvupD_normal.png",handle:"NortonLifelock"}]}}get SECURITY_CENTER_NEWS_FEEDS(){return{data:[{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/twitter-hack_190x190.jpg",text:"High-profile people and companies among Twitter accounts hacked in Bitcoin scam: Here’s what to watch out for",category:"Emerging Threats",url:"https://us.norton.com/internetsecurity-emerging-threats-twitter-hack.html"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/twitch_extensions_190x190.png",text:"50-plus Twitch extensions every video gamer should know",category:"Kids' Safety ",url:"https://us.norton.com/internetsecurity-kids-safety-twitch-extensions.html",focus:"top"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/grey-world-of-key-selling_190x190.jpg",text:"The grey world of key selling: Grey market sites come with many risks",category:"Kids' Safety ",url:"https://us.norton.com/internetsecurity-kids-safety-grey-world-of-key-selling.html"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/video-game-ratings-190x190.png",text:"2020 video game ratings in review, and what they mean to gamers",category:"Kids' Safety ",url:"https://us.norton.com/internetsecurity-kids-safety-video-game-ratings.html",focus:"top"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/docusign-phishing_190x190.jpg",text:"DocuSign phishing emails: 4 signs of an attack, and how to protect yourself",category:"Online Scams",url:"https://us.norton.com/internetsecurity-online-scams-docusign-phishing-scams.html"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/email_hacked_190x190.png",text:"4 things to do if your email account is hacked",category:"Malware",url:"https://us.norton.com/internetsecurity-malware-what-to-do-if-your-email-is-hacked.html"},{image:"http://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/general/img_icon_woman-phone-cafe-outside2_190x190.jpg",text:"The risks of public Wi-Fi",category:"Privacy",url:"https://us.norton.com/internetsecurity-privacy-risks-of-public-wi-fi.html"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/general/img_icon_id-theft-red-flags.jpg",text:"9 warning signs of identity theft and what to look for",category:"ID Theft",url:"https://us.norton.com/internetsecurity-id-theft-5-red-flags-of-identity-theft.html",focus:"top"}]}}get DYNAMIC_TILES_API_PARTNER(){return"nortontiles"}get DYNAMIC_TILES_API_SUB1(){return"10142"}get DYNAMIC_TILES_API_SUB2(){return{[NSSS.constants.IAC]:"searchnorton",[NSSS.constants.YAHOO]:"searchsafe"}}get DYNAMIC_TILES_API_VERSION(){return"1.3"}get DYNAMIC_TILES_API_RESULTS(){return"6"}get DYNAMIC_TILES_API_RSP_FORMAT(){return"json"}get DYNAMIC_TILES_API(){return"https://nortontiles.tiles.ampfeed.com/tiles"}get QUICK_LINKS_REQ(){return{[NSSS.constants.IAC]:{quickLinksRequest:NSSS.quickLinksConfig.quickLinksReq},[NSSS.constants.YAHOO]:{quickLinksRequest:NSSS.quickLinksConfig.quickLinksReq}}}get QUICK_LINKS_IMG_PATH(){return"https://static.nortoncdn.com/nortonsafesearch/quickLinks/"}get TILES_DATA_ELEMENT(){return"tiles"}get DYNAMIC_QL_FETCH_INTERVAL(){return 9e5}get DYNAMIC_QL_FETCH_INTERVAL_IN_MINUTES(){return this.DYNAMIC_QL_FETCH_INTERVAL/6e4}get EMPTY_RESPONSE_TILES_API(){return"empty_response_from_tiles_api"}}(NSSS=NSSS||{}).homePageConstants=new HomePageConstants,(e=>{const{isNil:a,isntNil:c,isBoolean:i,logger:l,isEmptyObject:n}=SymBfw["utils"],{globalSettings:r,constants:m,telemetryWrapper:g}=NSSS;(e.NSSS=e.NSSS||{}).quickLinksProvider=new class{_sleep(t){return new Promise(e=>setTimeout(e,t))}async _createDynamicQuickLinksAlarm(){SymBfw.alarmHelper.setAlarm(m.ALARM_NAMES.QUICK_LINKS,{periodInMinutes:NSSS.homePageConstants.DYNAMIC_QL_FETCH_INTERVAL_IN_MINUTES})}async fetchDynamicQuickLinks(){try{await NSSS.helperUtils.isVendorInitialized();var e=await this._fetchData(NSSS.homePageConstants.DYNAMIC_TILES_API,NSSS.homePageConstants.DYNAMIC_TILES_API_PARTNER,NSSS.homePageConstants.DYNAMIC_TILES_API_SUB1,NSSS.homePageConstants.DYNAMIC_TILES_API_SUB2[m.VENDOR]);r.setDynamicQuickLinksData(e)}catch(e){r.setDynamicQuickLinksData({}),SymBfw.logger.debug(e)}}async initializeDynamicQuickLinksData(){var e=await SymBfw.extensionAdapter.getAlarm(m.ALARM_NAMES.QUICK_LINKS);c(e)||(await this.fetchDynamicQuickLinks(),await this._createDynamicQuickLinksAlarm())}_capitalizeFirstLetter(e){return e[0].toUpperCase()+e.slice(1)}getQuickLinks(e){a(e)&&(e=NSSS.homePageConstants.QUICK_LINKS_REQ[m.VENDOR].quickLinksRequest);let s=r.getDynamicQuickLinksData(),o=NSSS.homePageConstants.QUICK_LINKS[m.VENDOR].quicklinksData,t={};return t.quicklinksData=e.map(t=>{if(i(t.dynamic)&&t.dynamic&&!n(s)){let e=s[t.name.toLowerCase()];if(c(e))return e.domain=o[t.name.toLowerCase()].domain,e}let e=o[t.name.toLowerCase()];return c(e)&&(e.imageUrl=NSSS.homePageConstants.QUICK_LINKS_IMG_PATH+e.name+"_favicon.ico"),e}),t}_formatApiResponse(e){if(a(e)||a(e[NSSS.homePageConstants.TILES_DATA_ELEMENT]))return null;let t=e[NSSS.homePageConstants.TILES_DATA_ELEMENT];const s={};return t.forEach(e=>{s[e.name.toLowerCase()]={name:e.name.toLowerCase(),associateUrl:e.click_url,imageUrl:e.image_url,impressionUrl:e.impression_url,toolTipName:this._capitalizeFirstLetter(e.name)}}),s}async _fetchData(e,t=NSSS.homePageConstants.DYNAMIC_TILES_API_PARTNER,s=NSSS.homePageConstants.DYNAMIC_TILES_API_SUB1,o=NSSS.homePageConstants.DYNAMIC_TILES_API_SUB2,a=NSSS.homePageConstants.DYNAMIC_TILES_API_VERSION,i=NSSS.homePageConstants.DYNAMIC_TILES_API_RESULTS,n=NSSS.homePageConstants.DYNAMIC_TILES_API_RSP_FORMAT){e=e+`?partner=${t}&sub1=${s}&sub2=${o}&v=${a}&results=${i}&out=`+n;let r;try{r=await SymBfw.utils.safeFetch(e)}catch(e){throw g.sendQuickLinkTilesApiFailureEvent(e.message),l.debug("unable to fetch data from tiles API due to  "+e),new Error("unable to fetch data from tiles API due to  "+e)}if(200!==r.status)throw g.sendQuickLinkTilesApiFailureEvent(r.status),new Error("Error response code from tiles API");t=await r.json(),s=this._formatApiResponse(t);if(c(s))return s;throw new Error("Empty / error response from tiles API")}}})(executionContext),function(e){"use strict";(e.NSSS=e.NSSS||{}).homePage=function(o,c){let l={};const{telemetryWrapper:m,constants:g,globalSettings:u,uiConstants:{MESSAGES:a,ChickletsTourStepsData:s},abTestingDataProvider:S,homePageTourManager:i}=c,{logger:n,extensionAdapter:r,localizer:p,utils:{isNil:_,isntNil:T,isBoolean:h,isNumber:t,baseURL:d,createNewGuid:C}}=o;return l.keepAssistPopupShown=!1,l.didUserTriggerHomePageTour=!1,l._shouldShowKeepAssistUI=async function(e){if("Firefox"===o.globals.BROWSER||l.keepAssistPopupShown)e({showKeepAssistUI:!1});else{await c.init.ready();var t=u.getValue(g.IS_HP_FIRST_LAUNCH);if(_(t)||t)return l.keepAssistPopupShown=!0,u.setValue(g.IS_HP_FIRST_LAUNCH,!1),void e({showKeepAssistUI:!0});e({showKeepAssistUI:!1})}},l._shouldShowHomePageTour=()=>!!c.homePage.didUserTriggerHomePageTour||!T(u.getHomepageTourLastShownTimestamp())&&(u.setHomepageTourLastShownTimestamp(Date.now()),m.sendTourTriggeredAutomaticallyEvent(),!0),l._shouldShowTourForCustomChickletsOnExtensionUpdate=()=>!T(u.getChickletTourLastShownTimestamp())&&(u.setChickletTourLastShownTimestamp(Date.now()),!0),l._getCustomChicklets=()=>{let e=u.getCustomChicklets();return _(e)&&((e=[...c.homePageConstants.DEFAULT_CUSTOM_CHICKLETS.customQuicklinksData]).forEach(e=>{e.id=C()}),u.setCustomChicklets(e)),e.map(e=>(e.imageUrl=c.homePageConstants.QUICK_LINKS_IMG_PATH+d(e.associateUrl.toLowerCase())+"_favicon.ico",e))},l._addEditCustomQuickLinks=t=>{const e=u.getCustomChicklets();if("edit"===t.mode){var s=e.findIndex(e=>e.id===t.chickletID);if(-1===s)return;e[s].name=t.chickletName,e[s].associateUrl=encodeURI(t.url),m.sendCustomChickletEventCompletion(t.mode,d(t.url.toLowerCase()))}else e.push({name:t.chickletName,associateUrl:encodeURI(t.url),id:o.utils.createNewGuid()}),m.sendCustomChickletEventCompletion(t.mode,d(t.url.toLowerCase()));u.setCustomChicklets(e)},l._getTourStepsData=(e,t)=>t?s:e?i.getTourData():null,l._sendHomePageMetadata=async function(e){await c.init.ready();var t=p.getNavigatorLanguage(),s=await c.quickLinksProvider.getQuickLinks(c.homePageConstants.QUICK_LINKS_REQ[g.VENDOR].quickLinksRequest);const o=c.homePageConstants.SECURITY_CENTER_NEWS_FEEDS;o.showSecurityCenterSection=u.getShowSecurityCenterSectionValue();var a={tweets:u.getTwitterFeedsData(),showTwitterSection:u.getShowTwitterSectionValue()},i=l._shouldShowHomePageTour(),n=this._shouldShowTourForCustomChickletsOnExtensionUpdate()&&!i,r=(n&&m.sendChickletTourShownTelemetry(),this._getTourStepsData(i,n)),t={direction:p.getCurrentLanguageDirection(),strings:p.getLocalizedStrings(c.uiConstants.HOMEPAGE.strings),navigatorLanguage:t,geoLocation:u.getGeoLocation(),chickeletsDataJson:T(s)?s:[],customChicklets:l._getCustomChicklets(),twitterFeeds:a,securityCenterNewsFeeds:o,shouldShowTour:i||n,tourData:r,abTestingData:S.getApplicableAppsData()};c.homePage.didUserTriggerHomePageTour=!1,e(t)},l.sendBGLoadedMessageToTabs=function(){r.getAllTabs(e=>{e.map(e=>{r.sendMessageToTab(e,{name:a.BACKGROUND_SCRIPT_LOADED})})})},l._handleTelemetry=async function(e){switch(await c.init.ready(),e.id){case a.HOME_PAGE_TOUR_FINISHED:m.sendTourFinishedEvent();break;case a.CUSTOM_QUICK_LINK_TOUR_FINISHED:m.sendChickletTourFinishedTelemetry();break;case a.HOME_PAGE_TOUR_KEY_PRESSED_FOR_CANCEL:m.sendTourKeyPressCancelEvent();break;case a.HOME_PAGE_TOUR_KEY_PRESSED_FOR_NEXT:m.sendTourKeyPressNextEvent();break;case a.CUSTOM_QUICK_LINK_TRIGGER_EVENT:T(e.mode)&&m.sendCustomQuickLinkTriggeredEvent(e.mode);break;case a.CUSTOM_QUICK_LINK_FAILURE:T(e.failureReason)&&T(e.domain)?m.sendCustomQuickLinkFailureEvent(e.failureReason,e.domain):T(e.failureReason)&&m.sendCustomQuickLinkFailureEvent(e.failureReason);break;case a.EXTN_HOME_PAGE_SEARCH_SUGGESTION_CLICKED_TELEMETRY:m.sendHomePageSearchSuggestionClickedEvent();break;case a.EXTN_HOME_PAGE_SEARCH_BUTTON_CLICKED_TELEMETRY:m.sendHomePageSearchButtonClickedEvent();break;case a.EXTN_HOME_PAGE_LOADED_TELEMETRY:T(e.width)&&T(e.height)&&m.sendHomePageLoadEvent(e.width,e.height);break;case a.EXTN_HOME_PAGE_ENGLISH_ONLY_HP_SHOWN_TELEMETRY:t(e.timeElapsed)&&t(e.searchCount)&&m.sendEnglishOnlyHomePageShownEvent(Math.round(e.timeElapsed/1e3).toString(),e.searchCount.toString());break;case a.EXTN_HOME_PAGE_TWEET_ITEM_CLICKED:T(e.url)&&T(e.position)&&m.sendTwitterFeedClickEvent(e.url,e.position);break;case a.EXTN_HOME_PAGE_SECURITY_CENTER_NEWS_ITEM_CLICKED:T(e.url)&&T(e.position)&&m.sendSecurityCenterNewsFeedClickEvent(e.url,e.position)}},l._handleSearch=async e=>{await c.init.ready(),c.searchQuery.launchTabwithSearchQuery(e)},l._handleQuickLinksClicked=async e=>{await c.init.ready(),r.createTab(e.url),e.customChicklet?m.sendHomePageChickletClickedEvent("custom",d(e.url.toLowerCase())):m.sendHomePageChickletClickedEvent(e.chickletName,null)},l._handleCustomChickletAddEdit=async e=>{await c.init.ready(),l._addEditCustomQuickLinks(e);e={name:a.EXTN_HOME_PAGE_UPDATE_CUSTOM_CHICKLETS_LINKS,message:{customChicklets:l._getCustomChicklets()}};l._sendMessageToAllHomePageTabs(e)},l._handleCustomChickletRemove=async t=>{await c.init.ready();let e=u.getCustomChicklets();e=e.filter(e=>e.id!=t.chickletID),u.setCustomChicklets(e);var s={name:a.EXTN_HOME_PAGE_UPDATE_CUSTOM_CHICKLETS_LINKS,message:{customChicklets:l._getCustomChicklets()}};l._sendMessageToAllHomePageTabs(s),m.sendCustomChickletEventCompletion("remove",d(t.url.toLowerCase()))},l._setShowSecuritySectionValue=async({showSecurityCenterSection:e})=>{await c.init.ready(),u.setShowSecurityCenterSectionValue(e),m.sendSecurityCenterSectionToggleEvent(e)},l._setShowTwitterSection=async({showTwitterSection:e})=>{await c.init.ready(),u.setShowTwitterSectionValue(e),m.sendTwitterSectionToggleEvent(e)},l._openLegalPage=async()=>{await c.init.ready(),c.settingsManager.openSiteDirector(g.LEGAL_SSDCAT,g.DEFAULT_ORIGIN_VALUE,!1,!1,g.DEST_PARAM_LEGAL)},l._sendMessageToAllHomePageTabs=async t=>{const e=await c.helperUtils.getAllHomePageTabs();e.forEach(e=>{r.sendMessageToTab(e,t)})},l._messageListener=function(e,t,s){r.getTabID(s);if(_(e))n.error("Request cannot be null");else{var s=e.name,o=e.message;switch(s){case a.GET_HOME_PAGE_METADATA:return l._sendHomePageMetadata(t),!0;case a.EXTN_HOME_PAGE_CHICKLET_CLICKED:if(_(o)||_(o.chickletName)||_(o.url))break;l._handleQuickLinksClicked(o);break;case a.EXTN_HOME_PAGE_CHICKLET_SAVE_CLICKED:if(_(o))break;l._handleCustomChickletAddEdit(o);break;case a.EXTN_HOME_PAGE_CHICKLET_TO_REMOVE:if(_(o))break;l._handleCustomChickletRemove(o);break;case a.LAUNCH_SEARCH_TAB_WITH_URL:if(_(e.query))break;l._handleSearch(e.query);break;case a.LAUNCH_SETTINGS_PAGE:c.helperUtils.openSettingsPage();break;case a.SHOULD_SHOW_HP_KEEP_ASSIST_POPUP:return l._shouldShowKeepAssistUI(t),!0;case a.OPEN_LEGAL_PAGE:l._openLegalPage();break;case a.SET_SHOW_SECURITY_CENTER_SECTION_VALUE:if(!h(e.showSecurityCenterSection))break;l._setShowSecuritySectionValue(e);break;case a.SET_SHOW_TWITTER_SECTION_VALUE:if(!h(e.showTwitterSection))break;l._setShowTwitterSection(e);break;case a.SEND_TELEMETRY_HOMEPAGE:if(_(o))break;l._handleTelemetry(o)}}},r.addMessageListener(l._messageListener),l}(e.SymBfw,e.NSSS),NSSS.homePage.sendBGLoadedMessageToTabs()}(executionContext);