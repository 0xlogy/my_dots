(()=>{var e=new class{get quickLinksData(){return{amazon:{name:"amazon",toolTipName:"Amazon",associateUrl:"https://nortontiles.ampxdirect.com?partner=nortontiles&sub1=10142&sub2=searchsafe&sub3=74301&source=als_tiles",domain:"amazon",regionsON:["en-US"],impressionUrl:"https://imp.mt48.net/static?v=2&partner=nortontiles&sub1=10142&sub2=searchsafe&sub3=74301&adv-id=74301"},"amazon-intl":{name:"amazon-intl",toolTipName:"Amazon",associateUrl:"https://nortontiles.ampxdirect.com?partner=nortontiles&sub1=10142&sub2=searchsafe&sub3=74357&source=als_tiles",domain:"amazon",regionsOFF:["en-US"],impressionUrl:"https://imp.mt48.net/static?v=2&partner=nortontiles&sub1=10142&sub2=searchsafe&sub3=74357&adv-id=74357"},walmart:{name:"walmart",toolTipName:"Walmart",associateUrl:"https://redirect.viglink.com?key=e39418fea5d725c6aa9070835ec4997b&u=https%3A%2F%2Fwalmart.com",domain:"walmart"},tripadvisor:{name:"tripadvisor",toolTipName:"Tripadvisor",associateUrl:"https://redirect.viglink.com?key=e39418fea5d725c6aa9070835ec4997b&u=https%3A%2F%2Ftripadvisor.com",domain:"tripadvisor"},nordstrom:{name:"nordstrom",toolTipName:"Nordstrom",associateUrl:"https://redirect.viglink.com/?key=e39418fea5d725c6aa9070835ec4997b&u=https%3A%2F%2Fshop.nordstrom.com%2F%0D%0A",domain:"nordstrom",regionsOFF:["en-US"]},booking:{name:"booking",toolTipName:"Booking.com",associateUrl:"https://www.awin1.com/awclick.php?mid=6776&id=1146969",domain:"booking"},turbotax:{name:"turbotax",toolTipName:"TurboTax",associateUrl:"https://nortontiles.ampxdirect.com?partner=nortontiles&sub1=10142&sub2=searchsafe&sub3=73780&source=als_tiles",domain:"turbotax",regionsON:["en-US"],impressionUrl:"https://imp.mt48.net/static?v=2&partner=nortontiles&sub1=10142&sub2=searchsafe&sub3=73780&adv-id=73780"}}}get quickLinksReq(){return[{name:"amazon",dynamic:!1},{name:"amazon-intl"},{name:"walmart"},{name:"tripadvisor"},{name:"nordstrom"},{name:"booking"},{name:"turbotax"}]}};NSSS.quickLinksConfig=e})(),(()=>{var{}=NSSS;var e=new class{constructor(){this.abTestImpls={}}registerABTestImpl(e,t){this.abTestImpls[e]=t}};NSSS.abTestingAppsRepo=e})(),NSSS.GoogleAppsConfig=class{static get config(){return[{name:"Account",spriteImagePosition:"0 -1585px",url:"https://myaccount.google.com/"},{name:"Maps",spriteImagePosition:"0 -483px",url:"https://maps.google.com"},{name:"Play",spriteImagePosition:"0 -207px",url:"https://play.google.com/"},{name:"Drive",spriteImagePosition:"0 -2967px",url:"https://drive.google.com/"},{name:"Calendar",spriteImagePosition:"0 -2553px",url:"https://calendar.google.com/"},{name:"News",spriteImagePosition:"0 -1311px",url:"https://news.google.com/"},{name:"Translate",spriteImagePosition:"0 -1932px",url:"https://translate.google.com/"},{name:"Photos",spriteImagePosition:"0 -2829px",url:"https://photos.google.com/"},{name:"Chat",spriteImagePosition:"0 -1656px",url:"https://chat.google.com/"},{name:"Duo",spriteImagePosition:"0 -2484px",url:"https://duo.google.com/"},{name:"Meet",spriteImagePosition:"0 -690px",url:"https://meet.google.com"},{name:"Docs",spriteImagePosition:"0 -1242px",url:"https://docs.google.com/document/"},{name:"Contacts",spriteImagePosition:"0 -2898px",url:"https://contacts.google.com/"},{name:"Classroom",spriteImagePosition:"0 -966px",url:"https://classroom.google.com/"}]}static get GOOGLE_APPS_TOUR_DATA(){return{APPS_TEST_2022_1_TEST_TRACK:{key:"google_apps",positionCSS:" tooltip-position-google-apps ",titleText:"Link to your apps",descriptionText:"Access your apps quickly and easily from your Norton Home Page.",toolTipCss:"tour-tooltip-container-google-apps",tourOrderIndex:5},APPS_TEST_2022_1_CONTROL_TRACK:{}}}static get TEST_ID(){return"APPS_TEST_2022_1"}},(()=>{const{uiConstants:{MESSAGES:a},globalSettings:s,GoogleAppsConfig:o,telemetryWrapper:i,uiConstants:n}=NSSS,{utils:{isNil:r,isntNil:c},logger:l,telemetryConstants:t}=SymBfw,u=SymBfw["extensionAdapter"];NSSS.googleAppsManager=new class{constructor(){this.messageListener=this.messageListener.bind(this)}_getAppsDataBasedOnVariant(e){return{APPS_TEST_2022_1_TEST_TRACK:{data:{configs:o.config,strings:NSSS.uiConstants.HOMEPAGE.googleApps.strings}},APPS_TEST_2022_1_CONTROL_TRACK:{data:{}}}[e]}getAppsData(e){var t=this._getAppsDataBasedOnVariant(e);return c(t)&&0!==Object.keys(t.data).length&&(t.key=n.HomepageTourSteps.GOOGLE_APPS,t.variantId=e,t.testId=o.TEST_ID),t}getTourData(e){return o.GOOGLE_APPS_TOUR_DATA[e]}_handleGoogleAppClicked(e,t){u.createTab(t),i.sendGoogleAppsClickEvent(e),s.setGoogleAppsClickedValue(!0)}_handleGoogleAppsPopupShown(){i.sendGoogleAppsPopupShownEvent()}_handleMoreGoogleAppsIconClicked(){u.createTab("https://about.google/intl/en-US/products/?tab=rh"),i.sendMoreGoogleAppsClickEvent()}messageListener(e){if(r(e))l.error("Request cannot be null");else{var t=e.name,s=e.message;switch(t){case a.GOOGLE_APP_CLICKED:r(s)||r(s.appName)||r(s.url)||this._handleGoogleAppClicked(s.appName,s.url);break;case a.MORE_GOOGLE_APPS_CLICKED:this._handleMoreGoogleAppsIconClicked();break;case a.GOOGLE_APPS_POPUP_SHOWN:this._handleGoogleAppsPopupShown()}}}getAppliedVariant(){var e=o.TEST_ID;return NSSS.abTestingDataProvider.getApplicableVariantForTestId(e)}_getGoogleAppVariantCustomDimesion(){if(!r(this.getAppliedVariant()))return{[t.parameters.CUSTOM_DIMENSION21]:()=>this.getAppliedVariant()}}_getGoogleAppsUsageCustomDimesion(){if(!r(this.getAppliedVariant())){var e=this._getAppsDataBasedOnVariant(this.getAppliedVariant());if(!r(e)&&0!==Object.keys(e.data).length)return{[t.parameters.CUSTOM_DIMENSION20]:()=>this.getAndResetGoogleAppsClickedValue()}}}getHeartBeatPingCustomDimesions(){return{...this._getGoogleAppVariantCustomDimesion(),...this._getGoogleAppsUsageCustomDimesion()}}getInstallPingCustomDimensions(){return this._getGoogleAppVariantCustomDimesion()}getAndResetGoogleAppsClickedValue(){let e=s.getGoogleAppsClickedValue();return r(e)&&(e=!1),s.setGoogleAppsClickedValue(!1),e}},NSSS.abTestingAppsRepo.registerABTestImpl(o.TEST_ID,NSSS.googleAppsManager),u.addMessageListener(NSSS.googleAppsManager.messageListener)})(),(()=>{const i=NSSS["abTestingAppsRepo"],{isNil:n,isntNil:r}=SymBfw["utils"];var e=new class{_getApplicableAppsAndTourData(){const o={appsData:{},tourData:[]};var e=Object.keys(i.abTestImpls);return n(e)||0===Object.keys(e).length||e.forEach(e=>{var t,s,a=this.getApplicableVariantForTestId(e);n(a)||(t=(e=i.abTestImpls[e]).getAppsData(a),r(t)&&0!==Object.keys(t.data).length&&(s=t.key,o.appsData={...o.appsData,[s]:t}),s=e.getTourData(a),r(s)&&0!==Object.keys(s).length&&o.tourData.push(s))}),o}getApplicableVariantForTestId(e){var e=multiVariateTestingSDK.multiVariateTestManager.getVariantForTestIds([e])["tests"];return 0!==e.length&&(e=e[0].variant,r(e))?e.variantId:null}getApplicableAppsData(){var e=this._getApplicableAppsAndTourData()["appsData"];return e}getApplicableTourData(){var e=this._getApplicableAppsAndTourData()["tourData"];return e}getCustomDimensionsData(){var e=Object.keys(i.abTestImpls);if(!n(e)&&0!==Object.keys(e).length){let t={},s={};return e.forEach(e=>{e=i.abTestImpls[e];t=e.getHeartBeatPingCustomDimesions(),s=e.getInstallPingCustomDimensions()}),{hbPingCustomDimesions:t,installPingCustomDimesions:s}}}getHeartBeatPingCustomDimesions(){var e=this.getCustomDimensionsData()["hbPingCustomDimesions"];return e}getInstallPingCustomDimesions(){var e=this.getCustomDimensionsData()["installPingCustomDimesions"];return e}};NSSS.abTestingDataProvider=e})(),(()=>{const e=NSSS["uiConstants"];NSSS.HomePageTourConfig=class{static get TOUR_COMPONENTS_EN_US(){return[e.HomepageTourSteps.SEARCH_BOX,e.HomepageTourSteps.STATIC_CHICKLETS,e.HomepageTourSteps.CUSTOM_CHICKLETS,e.HomepageTourSteps.TWITTER_FEEDS,e.HomepageTourSteps.SECURITY_CENTER_FEEDS]}static get TOUR_COMPONENTS_ROW(){return[e.HomepageTourSteps.SEARCH_BOX,e.HomepageTourSteps.STATIC_CHICKLETS,e.HomepageTourSteps.CUSTOM_CHICKLETS]}static get INITIAL_TOUR_DATA(){return{start:NSSS.uiConstants.HomepageTourSteps.WELCOME_DIALOG,[NSSS.uiConstants.HomepageTourSteps.WELCOME_DIALOG]:{nextStep:NSSS.uiConstants.HomepageTourSteps.SEARCH_BOX},[NSSS.uiConstants.HomepageTourSteps.SETTINGS_ICON]:{descriptionText:"A tour of Norton Safe Search is available in Settings.",autoHideTooltip:!0,positionCSS:" tooltip-position-settings-icon ",cssClassName:" tour-tooltip-for-settings-icon ",iconPath:"content/images/settings-icon-for-tour-tooltip.svg",nextStep:null}}}static get COMPONENTS_TOUR_DATA(){return{[e.HomepageTourSteps.SEARCH_BOX]:{key:"search_box",positionCSS:" tooltip-position-searchbox ",titleText:"Peace of mind with every search",descriptionText:"Norton Safe Search shows site safety ratings in your search results."},[e.HomepageTourSteps.STATIC_CHICKLETS]:{key:"static_chicklets",positionCSS:" tooltip-position-static-chicklets ",descriptionText:"Quick links to access popular sites with ease"},[e.HomepageTourSteps.CUSTOM_CHICKLETS]:{key:"custom_chicklets",positionCSS:" tooltip-position-custom-chicklets ",titleText:"Editable quick links",descriptionText:"Add your favorite sites to the new Quick Links bar."},[e.HomepageTourSteps.TWITTER_FEEDS]:{key:"twitter_feeds",positionCSS:" tooltip-position-tweets-list ",descriptionText:"Get security updates and tips from Norton"},[e.HomepageTourSteps.SECURITY_CENTER_FEEDS]:{key:"security_center_feeds",positionCSS:" tooltip-position-security-center ",descriptionText:"Explore the latest security and privacy blogs from NortonLifeLock and learn more about digital safety."}}}}})(),(()=>{const{abTestingDataProvider:a,HomePageTourConfig:c,uiConstants:l}=NSSS,{localizer:o,utils:{isntNil:i}}=SymBfw;var e=new class{_positionABTestComponent(t,e){return e.forEach(e=>{t.splice(e.tourOrderIndex,0,e.key)}),t}_processTourData(a,o,i){let n=a.length;const r=c.INITIAL_TOUR_DATA;return r.id=o,a.forEach((t,e)=>{var s=c.COMPONENTS_TOUR_DATA[t]||i.find(e=>e.key===t);s.pageNumberText=e+1+"/"+n,s.nextStep=e===n-1?l.HomepageTourSteps.SETTINGS_ICON:a[e+1],s.buttonText=e===n-1&&"tourForUS"===o?"Done":"Next",r[t]=s}),r}_prepareTourData(){let e=null,t=null;t="en-US"===o.getNavigatorLanguage()?(e=c.TOUR_COMPONENTS_EN_US,"tourForUS"):(e=c.TOUR_COMPONENTS_ROW,"tourForRestOfTheWorld");var s=a.getApplicableTourData();return i(s)&&0!==s.length&&(e=this._positionABTestComponent(e,s)),this._processTourData(e,t,s)}getTourData(){return this._prepareTourData()}};NSSS.homePageTourManager=e})();class HomePageConstants{get QUICK_LINKS(){return{[NSSS.constants.IAC]:{version:0,quicklinksData:NSSS.quickLinksConfig.quickLinksData},[NSSS.constants.YAHOO]:{version:0,quicklinksData:NSSS.quickLinksConfig.quickLinksData}}}get DEFAULT_CUSTOM_CHICKLETS(){return{customQuicklinksData:[{name:"Gmail",associateUrl:"https://www.gmail.com"},{name:"Facebook",associateUrl:"https://www.facebook.com"},{name:"Youtube",associateUrl:"https://www.youtube.com"}]}}get TWEETS(){return{data:[{time:"Oct 29, 2020",text:"76% of Americans believe they’ve encountered disinformation firsthand. Read more: https://t.co/5yth1vtHqi #disinformation #fakenews #elections https://t.co/oBgFkDdJhe",username:"NortonLifeLock",id_str:"1321530740736167939",userIconUrl:"https://pbs.twimg.com/profile_images/1191468124387676160/qqryvupD_normal.png",handle:"NortonLifelock"},{time:"Oct 28, 2020",text:"Don’t miss our #NCSAM webinar today where NortonLifeLock experts will share #CyberSafety tips to help protect you from online threats and identity theft. https://t.co/AFquzrBGVR #BeCyberSmart #IdentityTheft https://t.co/Flp3v3diBW",username:"NortonLifeLock",id_str:"1321459203664470018",userIconUrl:"https://pbs.twimg.com/profile_images/1191468124387676160/qqryvupD_normal.png",handle:"NortonLifelock"},{time:"Oct 27, 2020",text:"As part of National Cybersecurity Awareness Month, experts from NortonLifeLock will share Cyber Safety tips to help secure your connected life. Don’t miss our webinar tomorrow, Oct 28. https://t.co/8wWhMl47V4 #BeCyberSmart #NCSAM #IdentityTheft https://t.co/3TEu9Jpx6c",username:"NortonLifeLock",id_str:"1321126933950795780",userIconUrl:"https://pbs.twimg.com/profile_images/1191468124387676160/qqryvupD_normal.png",handle:"NortonLifelock"}]}}get SECURITY_CENTER_NEWS_FEEDS(){return{data:[{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/twitter-hack_190x190.jpg",text:"High-profile people and companies among Twitter accounts hacked in Bitcoin scam: Here’s what to watch out for",category:"Emerging Threats",url:"https://us.norton.com/internetsecurity-emerging-threats-twitter-hack.html"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/twitch_extensions_190x190.png",text:"50-plus Twitch extensions every video gamer should know",category:"Kids' Safety ",url:"https://us.norton.com/internetsecurity-kids-safety-twitch-extensions.html",focus:"top"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/grey-world-of-key-selling_190x190.jpg",text:"The grey world of key selling: Grey market sites come with many risks",category:"Kids' Safety ",url:"https://us.norton.com/internetsecurity-kids-safety-grey-world-of-key-selling.html"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/video-game-ratings-190x190.png",text:"2020 video game ratings in review, and what they mean to gamers",category:"Kids' Safety ",url:"https://us.norton.com/internetsecurity-kids-safety-video-game-ratings.html",focus:"top"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/docusign-phishing_190x190.jpg",text:"DocuSign phishing emails: 4 signs of an attack, and how to protect yourself",category:"Online Scams",url:"https://us.norton.com/internetsecurity-online-scams-docusign-phishing-scams.html"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/email_hacked_190x190.png",text:"4 things to do if your email account is hacked",category:"Malware",url:"https://us.norton.com/internetsecurity-malware-what-to-do-if-your-email-is-hacked.html"},{image:"http://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/general/img_icon_woman-phone-cafe-outside2_190x190.jpg",text:"The risks of public Wi-Fi",category:"Privacy",url:"https://us.norton.com/internetsecurity-privacy-risks-of-public-wi-fi.html"},{image:"https://now.symassets.com/content/dam/norton/global/images/non-product/misc/tlc/general/img_icon_id-theft-red-flags.jpg",text:"9 warning signs of identity theft and what to look for",category:"ID Theft",url:"https://us.norton.com/internetsecurity-id-theft-5-red-flags-of-identity-theft.html",focus:"top"}]}}get DYNAMIC_TILES_API_PARTNER(){return"nortontiles"}get DYNAMIC_TILES_API_SUB1(){return"10142"}get DYNAMIC_TILES_API_SUB2(){return{[NSSS.constants.IAC]:"searchnorton",[NSSS.constants.YAHOO]:"searchsafe"}}get DYNAMIC_TILES_API_VERSION(){return"1.3"}get DYNAMIC_TILES_API_RESULTS(){return"6"}get DYNAMIC_TILES_API_RSP_FORMAT(){return"json"}get DYNAMIC_TILES_API(){return"https://nortontiles.tiles.ampfeed.com/tiles"}get QUICK_LINKS_REQ(){return{[NSSS.constants.IAC]:{quickLinksRequest:NSSS.quickLinksConfig.quickLinksReq},[NSSS.constants.YAHOO]:{quickLinksRequest:NSSS.quickLinksConfig.quickLinksReq}}}get QUICK_LINKS_IMG_PATH(){return"https://static.nortoncdn.com/nortonsafesearch/quickLinks/"}get TILES_DATA_ELEMENT(){return"tiles"}get DYNAMIC_QL_FETCH_INTERVAL(){return 9e5}get DYNAMIC_QL_FETCH_INTERVAL_IN_MINUTES(){return this.DYNAMIC_QL_FETCH_INTERVAL/6e4}get EMPTY_RESPONSE_TILES_API(){return"empty_response_from_tiles_api"}get APP_NAME(){return"quick_links"}get QUICK_LINKS_CDN_URL(){return"https://static.nortoncdn.com/nortonextensionhomepage/##file-name##.json"}get REPLACE_STRING(){return"##file-name##"}get ENV_BASED_JSON_FILE(){return{INT:"quick-links-config-stage",INT2:"quick-links-config-stage",PROD:"quick-links-config"}}get BROWSERS(){return"browsers"}get VALUE(){return"value"}get SCHEDULER_INTERVAL_IN_MINS(){return 1440}get RETRY_INTERVAL_IN_MINUTES(){return 30}}(NSSS=NSSS||{}).homePageConstants=new HomePageConstants,(e=>{const{extensionAdapter:a,jsonDownloader:t,utils:{isNil:s,isntNil:c,logger:l,isEmptyObject:i,isObject:n,isArray:r}}=SymBfw,{globalSettings:u,constants:o,telemetryWrapper:S}=NSSS;(e.NSSS=e.NSSS||{}).quickLinksProvider=new class{_sleep(t){return new Promise(e=>setTimeout(e,t))}async _createDynamicQuickLinksAlarm(){SymBfw.alarmHelper.setAlarm(o.ALARM_NAMES.QUICK_LINKS,{periodInMinutes:NSSS.homePageConstants.DYNAMIC_QL_FETCH_INTERVAL_IN_MINUTES})}async fetchDynamicQuickLinks(){try{await NSSS.helperUtils.isVendorInitialized();var e=await this._fetchData(NSSS.homePageConstants.DYNAMIC_TILES_API,NSSS.homePageConstants.DYNAMIC_TILES_API_PARTNER,NSSS.homePageConstants.DYNAMIC_TILES_API_SUB1,NSSS.homePageConstants.DYNAMIC_TILES_API_SUB2[o.VENDOR]);u.setDynamicQuickLinksData(e)}catch(e){u.setDynamicQuickLinksData({}),SymBfw.logger.debug(e)}}async initializeDynamicQuickLinksData(){var e=await SymBfw.extensionAdapter.getAlarm(o.ALARM_NAMES.QUICK_LINKS);c(e)||(await this.fetchDynamicQuickLinks(),await this._createDynamicQuickLinksAlarm())}_capitalizeFirstLetter(e){return e[0].toUpperCase()+e.slice(1)}async getQuickLinks(){let e=u.getQuickLinksRequest(),s=u.getQuickLinksData();if(!n(s)||!r(e)){var t=await this._fetchJsonFromFallbackPath();if(!n(t)||!r(t.quickLinksRequest)||!n(t.quickLinksData))return;e=t.quickLinksRequest,s=t.quickLinksData}const a=u.getDynamicQuickLinksData(),o={quicklinksData:[]};return e.forEach(e=>{if(!e.browsers||e.browsers.includes(SymBfw.globals.BROWSER)){if(this._isDynamicQuickLinksApplicable(e)&&!i(a)){var t=a[e.name.toLowerCase()];if(c(t))return t.domain=s[e.name.toLowerCase()].domain,void o.quicklinksData.push(t)}t=s[e.name.toLowerCase()];c(t)&&(t.imageUrl=NSSS.homePageConstants.QUICK_LINKS_IMG_PATH+t.name+"_favicon.ico"),o.quicklinksData.push(t)}}),o}_isDynamicQuickLinksApplicable(e){var t;return!!e.dynamic&&!(!e.dynamic[NSSS.homePageConstants.VALUE]||e.dynamic[NSSS.homePageConstants.BROWSERS]&&(t=SymBfw.globals.BROWSER,!e.dynamic[NSSS.homePageConstants.BROWSERS].includes(t)))}_formatApiResponse(e){if(s(e)||s(e[NSSS.homePageConstants.TILES_DATA_ELEMENT]))return null;e=e[NSSS.homePageConstants.TILES_DATA_ELEMENT];const t={};return e.forEach(e=>{t[e.name.toLowerCase()]={name:e.name.toLowerCase(),associateUrl:e.click_url,imageUrl:e.image_url,impressionUrl:e.impression_url,toolTipName:this._capitalizeFirstLetter(e.name)}}),t}async _fetchJsonFromFallbackPath(){var e=a.getExtensionURL(`json/${NSSS.homePageConstants.ENV_BASED_JSON_FILE[NSSS.constants.ENVS]}.json`);try{var t,s=await SymBfw.utils.fetch(e);if(200===s.status)return t=(await s.json())["payload"],t}catch(e){return null}}async _onDownloadedCallback(e){var t,e=e["payload"];await NSSS.init.ready(),n(e)&&r(e.quickLinksRequest)&&n(e.quickLinksData)?({quickLinksRequest:e,quickLinksData:t}=e,u.setQuickLinksRequest(e),u.setQuickLinksData(t)):SymBfw.logger.error("Invalid quickLinks json payload")}initializeDownloadConfigs(){var e=NSSS.homePageConstants.QUICK_LINKS_CDN_URL.replace(NSSS.homePageConstants.REPLACE_STRING,NSSS.homePageConstants.ENV_BASED_JSON_FILE[NSSS.constants.ENVS]),e={appName:NSSS.homePageConstants.APP_NAME,cdnUrl:e,schedulerIntervalInMins:NSSS.homePageConstants.SCHEDULER_INTERVAL_IN_MINS,retryIntervalInMins:NSSS.homePageConstants.RETRY_INTERVAL_IN_MINS,onDownloadedCallback:this._onDownloadedCallback};t.init(e)}async _fetchData(e,t=NSSS.homePageConstants.DYNAMIC_TILES_API_PARTNER,s=NSSS.homePageConstants.DYNAMIC_TILES_API_SUB1,a=NSSS.homePageConstants.DYNAMIC_TILES_API_SUB2,o=NSSS.homePageConstants.DYNAMIC_TILES_API_VERSION,i=NSSS.homePageConstants.DYNAMIC_TILES_API_RESULTS,n=NSSS.homePageConstants.DYNAMIC_TILES_API_RSP_FORMAT){e=e+`?partner=${t}&sub1=${s}&sub2=${a}&v=${o}&results=${i}&out=`+n;let r;try{r=await SymBfw.utils.safeFetch(e)}catch(e){throw S.sendQuickLinkTilesApiFailureEvent(e.message),l.debug("unable to fetch data from tiles API due to  "+e),new Error("unable to fetch data from tiles API due to  "+e)}if(200!==r.status)throw S.sendQuickLinkTilesApiFailureEvent(r.status),new Error("Error response code from tiles API");t=await r.json(),s=this._formatApiResponse(t);if(c(s))return s;throw new Error("Empty / error response from tiles API")}}})(executionContext),NSSS.quickLinksProvider.initializeDownloadConfigs(),function(e){"use strict";(e.NSSS=e.NSSS||{}).homePage=function(a,m){let p={};const{telemetryWrapper:_,constants:T,globalSettings:h,uiConstants:{MESSAGES:o,ChickletsTourStepsData:s,HOMEPAGE_EXTENSION:d},abTestingDataProvider:E,homePageTourManager:i,googleAppsManager:C,nsssDarkModeHandlerBG:k}=m,{logger:n,extensionAdapter:r,localizer:A,utils:{isNil:c,isntNil:N,isBoolean:l,isNumber:t,baseURL:u,createNewGuid:S}}=a;return p.keepAssistPopupShown=!1,p.didUserTriggerHomePageTour=!1,p._shouldShowKeepAssistUI=async function(e){var t;"Firefox"!==a.globals.BROWSER&&!p.keepAssistPopupShown&&m.uiConstants.EXTENSION_TYPE!==d&&(await m.init.ready(),t=h.getValue(T.IS_HP_FIRST_LAUNCH),c(t)||t)?(p.keepAssistPopupShown=!0,h.setValue(T.IS_HP_FIRST_LAUNCH,!1),e({showKeepAssistUI:!0})):e({showKeepAssistUI:!1})},p._shouldShowHomePageTour=()=>{if(!m.homePage.didUserTriggerHomePageTour){if(m.uiConstants.EXTENSION_TYPE!==d){var e=p._shouldShowHomePageOldTour();if(!e)return e;h.setHomepageTourLastShownTimestamp(Date.now()),_.sendTourTriggeredAutomaticallyEvent()}if(N(h.getNewHpTourLastShownTimestamp()))return!1;_.sendTourTriggeredAutomaticallyEvent()}return!0},p._shouldShowHomePageOldTour=()=>!N(h.getHomepageTourLastShownTimestamp()),p._shouldShowTourForCustomChickletsOnExtensionUpdate=()=>!N(h.getChickletTourLastShownTimestamp())&&(h.setChickletTourLastShownTimestamp(Date.now()),!0),p._getCustomChicklets=()=>{let e=h.getCustomChicklets();return c(e)&&((e=[...m.homePageConstants.DEFAULT_CUSTOM_CHICKLETS.customQuicklinksData]).forEach(e=>{e.id=S()}),h.setCustomChicklets(e)),e.map(e=>(e.imageUrl=m.homePageConstants.QUICK_LINKS_IMG_PATH+u(e.associateUrl.toLowerCase())+"_favicon.ico",e))},p._addEditCustomQuickLinks=t=>{var e=h.getCustomChicklets();if("edit"===t.mode){var s=e.findIndex(e=>e.id===t.chickletID);if(-1===s)return;e[s].name=t.chickletName,e[s].associateUrl=encodeURI(t.url)}else e.push({name:t.chickletName,associateUrl:encodeURI(t.url),id:a.utils.createNewGuid()});_.sendCustomChickletEventCompletion(t.mode,u(t.url.toLowerCase())),h.setCustomChicklets(e)},p._getTourStepsData=(e,t)=>t?s:e?i.getTourData():null,p._sendHomePageMetadata=async function(e){await m.init.ready();var t=A.getNavigatorLanguage(),s=await m.quickLinksProvider.getQuickLinks(),a=m.homePageConstants.SECURITY_CENTER_NEWS_FEEDS,o=(a.showSecurityCenterSection=h.getShowSecurityCenterSectionValue(),{tweets:h.getTwitterFeedsData(),showTwitterSection:h.getShowTwitterSectionValue()}),i=p._shouldShowHomePageTour(),n=this._shouldShowTourForCustomChickletsOnExtensionUpdate()&&!i,r=(n&&_.sendChickletTourShownTelemetry(),this._getTourStepsData(i,n)),c=m.weatherWidgetDataManager&&m.weatherWidgetDataManager.getWidgetData(),l=m.backgroundImageManager&&m.backgroundImageManager.getBackgroundImageData(),u=k&&await k.isDarkModeSet(),S=m.settingsManager.getHomePageSettings&&await m.settingsManager.getHomePageSettings(),g={[T.AM_TIME_UNIT]:A.getLocalizedString(T.AM_TIME_UNIT),[T.PM_TIME_UNIT]:A.getLocalizedString(T.PM_TIME_UNIT)},t={direction:A.getCurrentLanguageDirection(),strings:A.getLocalizedStrings(m.uiConstants.HOMEPAGE.strings),navigatorLanguage:t,geoLocation:h.getGeoLocation(),chickeletsDataJson:N(s)?s:[],customChicklets:p._getCustomChicklets(),twitterFeeds:o,securityCenterNewsFeeds:a,shouldShowTour:m.uiConstants.EXTENSION_TYPE===d?i:i||n,tourData:r,abTestingData:E.getApplicableAppsData(),googleAppsData:C.getDefaultAppsData&&C.getDefaultAppsData(),accuWeatherData:c,settings:S,backgroundImageData:l,isDarkModeSet:u,localizedTimeUnit:g};m.homePage.didUserTriggerHomePageTour=!1,e(t)},p.sendBGLoadedMessageToTabs=function(){r.getAllTabs(e=>{e.map(e=>{r.sendMessageToTab(e,{name:o.BACKGROUND_SCRIPT_LOADED})})})},p._handleTelemetry=async function(e){switch(await m.init.ready(),e.id){case o.HOME_PAGE_TOUR_FINISHED:_.sendTourFinishedEvent();break;case o.CUSTOM_QUICK_LINK_TOUR_FINISHED:_.sendChickletTourFinishedTelemetry();break;case o.HOME_PAGE_TOUR_KEY_PRESSED_FOR_CANCEL:_.sendTourKeyPressCancelEvent();break;case o.HOME_PAGE_TOUR_KEY_PRESSED_FOR_NEXT:_.sendTourKeyPressNextEvent();break;case o.CUSTOM_QUICK_LINK_TRIGGER_EVENT:N(e.mode)&&_.sendCustomQuickLinkTriggeredEvent(e.mode);break;case o.CUSTOM_QUICK_LINK_FAILURE:N(e.failureReason)&&N(e.domain)?_.sendCustomQuickLinkFailureEvent(e.failureReason,e.domain):N(e.failureReason)&&_.sendCustomQuickLinkFailureEvent(e.failureReason);break;case o.EXTN_HOME_PAGE_SEARCH_SUGGESTION_CLICKED_TELEMETRY:_.sendHomePageSearchSuggestionClickedEvent();break;case o.EXTN_HOME_PAGE_SEARCH_BUTTON_CLICKED_TELEMETRY:_.sendHomePageSearchButtonClickedEvent();break;case o.EXTN_HOME_PAGE_LOADED_TELEMETRY:N(e.width)&&N(e.height)&&_.sendHomePageLoadEvent(e.width,e.height);break;case o.EXTN_HOME_PAGE_ENGLISH_ONLY_HP_SHOWN_TELEMETRY:t(e.timeElapsed)&&t(e.searchCount)&&_.sendEnglishOnlyHomePageShownEvent(Math.round(e.timeElapsed/1e3).toString(),e.searchCount.toString());break;case o.EXTN_HOME_PAGE_TWEET_ITEM_CLICKED:N(e.url)&&N(e.position)&&_.sendTwitterFeedClickEvent(e.url,e.position);break;case o.EXTN_HOME_PAGE_SECURITY_CENTER_NEWS_ITEM_CLICKED:N(e.url)&&N(e.position)&&_.sendSecurityCenterNewsFeedClickEvent(e.url,e.position);break;case o.TOUR_GOT_IT_CLICKED:_.sendHomePageTourGotItClick(),p._handleTourClose();break;case o.TOUR_CLOSE_ICON_CLICKED:_.sendHomePageTourCloseClick(),p._handleTourClose()}},p._handleSearch=async(e,t)=>{await m.init.ready(),m.searchQuery.launchTabwithSearchQuery(e,t)},p._handleQuickLinksClicked=async e=>{await m.init.ready(),r.createTab(e.url),e.chickletType?_.sendHomePageChickletClickedEvent(e.chickletType,u(e.url.toLowerCase())):_.sendHomePageChickletClickedEvent(e.chickletName,null)},p._handleCustomChickletAddEdit=async e=>{await m.init.ready(),p._addEditCustomQuickLinks(e);e={name:o.EXTN_HOME_PAGE_UPDATE_CUSTOM_CHICKLETS_LINKS,message:{customChicklets:p._getCustomChicklets()}};p._sendMessageToAllHomePageTabs(e)},p._handleCustomChickletRemove=async t=>{await m.init.ready();let e=h.getCustomChicklets();e=e.filter(e=>e.id!=t.chickletID),h.setCustomChicklets(e);var s={name:o.EXTN_HOME_PAGE_UPDATE_CUSTOM_CHICKLETS_LINKS,message:{customChicklets:p._getCustomChicklets()}};p._sendMessageToAllHomePageTabs(s),_.sendCustomChickletEventCompletion("remove",u(t.url.toLowerCase()))},p._setShowSecuritySectionValue=async({showSecurityCenterSection:e})=>{await m.init.ready(),h.setShowSecurityCenterSectionValue(e),_.sendSecurityCenterSectionToggleEvent(e)},p._setShowTwitterSection=async({showTwitterSection:e})=>{await m.init.ready(),h.setShowTwitterSectionValue(e),_.sendTwitterSectionToggleEvent(e)},p._openLegalPage=async()=>{await m.init.ready(),m.settingsManager.openSiteDirector(T.LEGAL_SSDCAT,T.DEFAULT_ORIGIN_VALUE,!1,!1,T.DEST_PARAM_LEGAL)},p._sendMessageToAllHomePageTabs=async t=>{(await m.helperUtils.getAllHomePageTabs()).forEach(e=>{r.sendMessageToTab(e,t)})},p._handleTourClose=async()=>{await m.init.ready(),h.setNewHpTourLastShownTimestamp(Date.now()),await m.NSSSHelper.sendMessageToHomePageTabs({name:o.UPDATE_HP_TOUR})},p._messageListener=function(e,t,s){r.getTabID(s);if(c(e))n.error("Request cannot be null");else{var s=e.name,a=e.message;switch(s){case o.GET_HOME_PAGE_METADATA:return p._sendHomePageMetadata(t),!0;case o.EXTN_HOME_PAGE_CHICKLET_CLICKED:c(a)||c(a.chickletName)||c(a.url)||p._handleQuickLinksClicked(a);break;case o.EXTN_HOME_PAGE_CHICKLET_SAVE_CLICKED:c(a)||p._handleCustomChickletAddEdit(a);break;case o.EXTN_HOME_PAGE_CHICKLET_TO_REMOVE:c(a)||p._handleCustomChickletRemove(a);break;case o.LAUNCH_SEARCH_TAB_WITH_URL:c(e.query)||p._handleSearch(e.query,e.isDarkModeSet);break;case o.LAUNCH_SETTINGS_PAGE:m.helperUtils.openSettingsPage();break;case o.SHOULD_SHOW_HP_KEEP_ASSIST_POPUP:return p._shouldShowKeepAssistUI(t),!0;case o.OPEN_LEGAL_PAGE:p._openLegalPage();break;case o.SET_SHOW_SECURITY_CENTER_SECTION_VALUE:l(e.showSecurityCenterSection)&&p._setShowSecuritySectionValue(e);break;case o.SET_SHOW_TWITTER_SECTION_VALUE:l(e.showTwitterSection)&&p._setShowTwitterSection(e);break;case o.HP_NEW_TOUR_CLOSED:p._handleTourClose();break;case o.SEND_TELEMETRY_HOMEPAGE:c(a)||p._handleTelemetry(a)}}},r.addMessageListener(p._messageListener),p}(e.SymBfw,e.NSSS),NSSS.homePage.sendBGLoadedMessageToTabs()}(executionContext);